

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-88382509-1']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Retrieving OpenStreetMap data &mdash; AutoGIS site documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript">
          var DOCUMENTATION_OPTIONS = {
              URL_ROOT:'../../',
              VERSION:'site',
              LANGUAGE:'None',
              COLLAPSE_INDEX:false,
              FILE_SUFFIX:'.html',
              HAS_SOURCE:  true,
              SOURCELINK_SUFFIX: '.txt'
          };
      </script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/banner.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Network analysis in Python" href="network-analysis.html" />
    <link rel="prev" title="Overview" href="../../lessons/L6/overview.html" />
    <link href="../../_static/geo-python.css" rel="stylesheet" type="text/css">
     

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> AutoGIS
          

          
            
            <img src="../../_static/logo_hy_geo_135.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                2019
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Course information</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../course-info/course-info.html">General info</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../course-info/course-environment-components.html">Course environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../course-info/grading.html">Grading</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../course-info/learning-goals.html">Learning goals</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../course-info/Installing_Anacondas_GIS.html">Installing Python + GIS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../course-info/resources.html">Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../course-info/License-terms.html">License and terms of usage</a></li>
</ul>
<p class="caption"><span class="caption-text">Lesson 1</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../lessons/L1/Intro-Python-GIS.html">Motivation for the course</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../lessons/L1/overview.html">Lesson overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L1/geometric-objects.html">Shapely and geometric objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../lessons/L1/exercise-1.html">Exercise 1</a></li>
</ul>
<p class="caption"><span class="caption-text">Lesson 2</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../lessons/L2/overview.html">Lesson 2 Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L2/data_io.html">Vector Data I/O in Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L2/geopandas-basics.html">Introduction to Geopandas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L2/projections.html">Map projections</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L2/calculating-distances.html">Calculating distances</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L2/geopandas-geometries.html">Creating new layers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../lessons/L2/exercise-2.html">Exercise 2</a></li>
</ul>
<p class="caption"><span class="caption-text">Lesson 3</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../lessons/L3/overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../lessons/L3/geocoding.html">Geocoding</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L3/geocoding_in_geopandas.html">Geocoding in Geopandas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L3/point-in-polygon.html">Point in Polygon &amp; Intersect</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L3/spatial_index.html">Spatial index - How to boost spatial queries?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L3/spatial-join.html">Spatial join</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L3/nearest-neighbour.html">Nearest Neighbour Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L3/nearest-neighbor-faster.html">Nearest neighbor analysis with large datasets</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../lessons/L3/exercise-3.html">Exercise 3</a></li>
</ul>
<p class="caption"><span class="caption-text">Lesson 4</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../lessons/L4/overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L4/geometric-operations.html">Geometric operations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L4/reclassify.html">Data reclassification</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../lessons/L4/exercise-4.html">Exercise 4</a></li>
</ul>
<p class="caption"><span class="caption-text">Lesson 5</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../lessons/L5/overview.html">Lesson 5 Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L5/static_maps.html">Static maps</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L5/interactive-map-folium.html">Interactive maps</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L5/Employment_in_Finland.html">Employment rates in Finland</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../lessons/L5/share-on-github.html">Sharing interactive plots on GitHub</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../lessons/L5/exercise-5.html">Exercise 5</a></li>
</ul>
<p class="caption"><span class="caption-text">Lesson 6</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../lessons/L6/overview.html">Overview</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Retrieving OpenStreetMap data</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#What-is-OpenStreetMap?">What is OpenStreetMap?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#OSMnx">OSMnx</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Download-and-visualize-OpenStreetMap-data-with-OSMnx">Download and visualize OpenStreetMap data with OSMnx</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#Street-network">Street network</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Place-polygon">Place polygon</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Building-footprints">Building footprints</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Points-of-interest">Points-of-interest</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Graph-to-GeoDataFrame">Graph to GeoDataFrame</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Plotting-the-data">Plotting the data</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Extra:-Park-polygons">Extra: Park polygons</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="network-analysis.html">Network analysis in Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../lessons/L6/exercise-6.html">Exercise 6</a></li>
</ul>
<p class="caption"><span class="caption-text">Final Assignment</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../lessons/FA/final-assignment.html">Final assignment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../lessons/FA/final-assignment-grading.html">Grading criteria for the final assignment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../lessons/FA/fa-hints.html">Final Assignment hints</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">AutoGIS</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
      <li>Retrieving OpenStreetMap data</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/Automating-GIS-processes/site/blob/develop/source/notebooks/L6/retrieve_osm_data.ipynb" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  


    
    



    <p class="scv-banner scv-sphinx_rtd_theme"><a href="../../../master/notebooks/L6/retrieve_osm_data.html"><b>Warning:</b> This document is for the development version of AutoGIS. The main version is master.</a></p>

<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput,
div.nbinput div.prompt,
div.nbinput div.input_area,
div.nbinput div[class*=highlight],
div.nbinput div[class*=highlight] pre,
div.nboutput,
div.nbinput div.prompt,
div.nbinput div.output_area,
div.nboutput div[class*=highlight],
div.nboutput div[class*=highlight] pre {
    background: none;
    border: none;
    padding: 0 0;
    margin: 0;
    box-shadow: none;
}

/* avoid gaps between output lines */
div.nboutput div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput,
div.nboutput {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput,
    div.nboutput {
        flex-direction: column;
    }
}

/* input container */
div.nbinput {
    padding-top: 5px;
}

/* last container */
div.nblast {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput div.prompt,
div.nboutput div.prompt {
    min-width: 5ex;
    padding-top: 0.4em;
    padding-right: 0.4em;
    text-align: right;
    flex: 0;
}
@media (max-width: 540px) {
    div.nbinput div.prompt,
    div.nboutput div.prompt {
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput div.prompt.empty {
        padding: 0;
    }
}

/* disable scrollbars on prompts */
div.nbinput div.prompt pre,
div.nboutput div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput div.input_area,
div.nboutput div.output_area {
    padding: 0.4em;
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput div.input_area,
    div.nboutput div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    background: #f5f5f5;
}

/* override MathJax center alignment in output cells */
div.nboutput div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput div.math p {
    text-align: left;
}

/* standard error */
div.nboutput div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }

/* Some additional styling taken form the Jupyter notebook CSS */
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
div.rendered_html th {
  font-weight: bold;
}
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}

/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast,
.nboutput.nblast {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast + .nbinput {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="admonition note">
This page was generated from <a class="reference external" href="https://github.com/Automating-GIS-processes/site/blob/master/source/notebooks/L6/retrieve_osm_data.ipynb">source/notebooks/L6/retrieve_osm_data.ipynb</a>.
<span class="raw-html"><br/><a href="https://mybinder.org/v2/gh/Automating-GIS-processes/site/master?urlpath=lab/tree/source/notebooks/L6/retrieve_osm_data.ipynb"><img alt="Binder badge" src="https://img.shields.io/badge/launch-full%20binder-red.svg" style="vertical-align:text-bottom"></a></span>
<span class="raw-html"><a href="https://mybinder.org/v2/gh/Automating-GIS-processes/notebooks/master?urlpath=lab/tree/notebooks/L6/retrieve_osm_data.ipynb"><img alt="Binder badge" src="https://img.shields.io/badge/launch-student%20binder-red.svg" style="vertical-align:text-bottom"></a></span>
<span class="raw-html"><a href="https://notebooks.csc.fi/#/blueprint/8d7886c2f0ac402aa99235f8d289a52b"><img alt="CSC badge" src="https://img.shields.io/badge/launch-CSC%20notebook-blue.svg" style="vertical-align:text-bottom"></a></span></div>
<div class="section" id="Retrieving-OpenStreetMap-data">
<h1>Retrieving OpenStreetMap data<a class="headerlink" href="#Retrieving-OpenStreetMap-data" title="Permalink to this headline">¶</a></h1>
<p><img alt="image0" src="../../_images/OSM_logo.png" /></p>
<div class="section" id="What-is-OpenStreetMap?">
<h2>What is OpenStreetMap?<a class="headerlink" href="#What-is-OpenStreetMap?" title="Permalink to this headline">¶</a></h2>
<p>OpenStreetMap (OSM) is a global collaborative (crowd-sourced) dataset and project that aims at creating a free editable map of the world containing a lot of information about our environment. It contains data for example about streets, buildings, different services, and landuse to mention a few. You can view the map at www.openstreetmap.org. You can also sign up as a contributor if you want to edit the map.</p>
<p>OSM has a large userbase with more than 4 million users and over a million contributers that update actively the OSM database with 3 million changesets per day. In total OSM contains 5 billion nodes that form the basis of the digitally mapped world that OSM provides (<a class="reference external" href="http://wiki.openstreetmap.org/wiki/Stats">stats from November 2019</a>).</p>
<p>OpenStreetMap is used not only for integrating the <strong>OSM maps</strong> as background maps to visualizations or online maps, but also for many other purposes such as <strong>routing</strong>, <strong>geocoding</strong>, <strong>education</strong>, and <strong>research</strong>. OSM is also widely used for humanitarian response e.g.&nbsp;in crisis areas (e.g.&nbsp;after natural disasters) and for fostering economic development (see more from <a class="reference external" href="https://www.hotosm.org">Humanitarian OpenStreetMap Team (HOTOSM) website</a>).</p>
</div>
<div class="section" id="OSMnx">
<h2>OSMnx<a class="headerlink" href="#OSMnx" title="Permalink to this headline">¶</a></h2>
<p>This week we will explore a Python module called <a class="reference external" href="https://github.com/gboeing/osmnx">OSMnx</a> that can be used to retrieve, construct, analyze, and visualize street networks from OpenStreetMap, and also retrieve data about Points of Interest such as restaurants, schools, and lots of different kind of services. It is also easy to conduct network routing based on walking, cycling or driving by combining OSMnx functionalities with a package called
<a class="reference external" href="https://networkx.github.io/documentation/stable/">NetworkX</a>.</p>
<p>To get an overview of the capabilities of the package, see an introductory video given by the lead developer of the package, Prof.&nbsp;Geoff Boeing: <a class="reference external" href="https://www.youtube.com/watch?v=Q0uxu25ddc4&amp;list=PLs9D4XVqc6dCAhhvhZB7aHGD8fCeCC_6N">“Meet the developer: Introduction to OSMnx package by Geoff Boeing”</a>.</p>
<p>There is also a scientific article available describing the package:</p>
<ul class="simple">
<li>Boeing, G. 2017. <a class="reference external" href="https://www.researchgate.net/publication/309738462_OSMnx_New_Methods_for_Acquiring_Constructing_Analyzing_and_Visualizing_Complex_Street_Networks">“OSMnx: New Methods for Acquiring, Constructing, Analyzing, and Visualizing Complex Street Networks.”</a> Computers, Environment and Urban Systems 65, 126-139. doi:10.1016/j.compenvurbsys.2017.05.004</li>
</ul>
</div>
<div class="section" id="Download-and-visualize-OpenStreetMap-data-with-OSMnx">
<h2>Download and visualize OpenStreetMap data with OSMnx<a class="headerlink" href="#Download-and-visualize-OpenStreetMap-data-with-OSMnx" title="Permalink to this headline">¶</a></h2>
<p>One the most useful features that OSMnx provides is an easy-to-use way of retrieving <a class="reference external" href="http://www.openstreetmap.org">OpenStreetMap</a> data (using <a class="reference external" href="http://wiki.openstreetmap.org/wiki/Overpass_API">OverPass API</a>).</p>
<p>In this tutorial, we will learn how to download and visualize OSM data covering a specified area of interest: a district of Kamppi in Helsinki, Finland.</p>
<div class="section" id="Street-network">
<h3>Street network<a class="headerlink" href="#Street-network" title="Permalink to this headline">¶</a></h3>
<p>OSMnx makes it really easy to do that as it allows you to specify an address to retrieve the OpenStreetMap data around that area. In fact, OSMnx uses the same Nominatim Geocoding API to do this, which we tested during the Lesson 2.</p>
<ul class="simple">
<li>Let’s retrieve OpenStreetMap (OSM) data by specifying <code class="docutils literal notranslate"><span class="pre">&quot;Kamppi,</span> <span class="pre">Helsinki,</span> <span class="pre">Finland&quot;</span></code> as the place from where the data should be downloaded.</li>
</ul>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">osmnx</span> <span class="k">as</span> <span class="nn">ox</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="o">%</span><span class="k">matplotlib</span> inline

<span class="c1"># Specify the name that is used to seach for the data</span>
<span class="n">place_name</span> <span class="o">=</span> <span class="s2">&quot;Kamppi, Helsinki, Finland&quot;</span>

<span class="c1"># Fetch OSM street network from the location</span>
<span class="n">graph</span> <span class="o">=</span> <span class="n">ox</span><span class="o">.</span><span class="n">graph_from_place</span><span class="p">(</span><span class="n">place_name</span><span class="p">)</span>
</pre></div>
</div>
</div>
<ul class="simple">
<li>Check the data type of the graph:</li>
</ul>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="nb">type</span><span class="p">(</span><span class="n">graph</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>networkx.classes.multidigraph.MultiDiGraph
</pre></div>
</div>
</div>
<p>Okey, as we can see the data that we retrieved is a special data object called <code class="docutils literal notranslate"><span class="pre">networkx.classes.multidigraph.MultiDiGraph</span></code>. A DiGraph is a data type that stores nodes and edges with optional data, or attributes. What we can see here is that this data type belongs to a Python module called <a class="reference external" href="https://networkx.github.io/documentation/stable/">networkx</a> that can be used to create, manipulate, and study the structure, dynamics, and functions of complex networks. Networkx module contains
algorithms that can be used to calculate <a class="reference external" href="https://networkx.github.io/documentation/networkx-1.10/reference/algorithms.shortest_paths.html">shortest paths</a> along road networks using e.g.&nbsp;<a class="reference external" href="https://en.wikipedia.org/wiki/Dijkstra%27s_algorithm">Dijkstra’s</a> or <a class="reference external" href="https://en.wikipedia.org/wiki/A*_search_algorithm">A* algorithm</a>.</p>
<ul class="simple">
<li>Let’s see how our street network looks like. It is easy to visualize the graph with OSMnx with <code class="docutils literal notranslate"><span class="pre">plot_graph()</span></code> function. The function utilizes Matplotlib for visualizing the data, hence as a result it returns a matplotlib figure and axis objects:</li>
</ul>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Plot the streets</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">ox</span><span class="o">.</span><span class="n">plot_graph</span><span class="p">(</span><span class="n">graph</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/notebooks_L6_retrieve_osm_data_7_0.png" src="../../_images/notebooks_L6_retrieve_osm_data_7_0.png" />
</div>
</div>
<p>Great! Now we can see that our graph contains the nodes (blue circles) and the edges (gray lines) that connects those nodes to each other.</p>
</div>
<div class="section" id="Place-polygon">
<h3>Place polygon<a class="headerlink" href="#Place-polygon" title="Permalink to this headline">¶</a></h3>
<p>Let’s also plot the Polygon that represents our area of interest (Kamppi, Helsinki). We can retrieve the Polygon geometry using the <a class="reference external" href="https://osmnx.readthedocs.io/en/stable/osmnx.html#osmnx.core.gdf_from_place">gdf_from_place()</a> -function.</p>
<ul class="simple">
<li>Retrieve the extent of our location:</li>
</ul>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">area</span> <span class="o">=</span> <span class="n">ox</span><span class="o">.</span><span class="n">gdf_from_place</span><span class="p">(</span><span class="n">place_name</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>As the name of the function already tells us, <code class="docutils literal notranslate"><span class="pre">gdf_from_place()</span></code>returns a GeoDataFrame based on the specified place name query.</p>
<ul class="simple">
<li>Check the data type:</li>
</ul>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="nb">type</span><span class="p">(</span><span class="n">area</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>geopandas.geodataframe.GeoDataFrame
</pre></div>
</div>
</div>
<ul class="simple">
<li>Check the data:</li>
</ul>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">area</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>geometry</th>
      <th>place_name</th>
      <th>bbox_north</th>
      <th>bbox_south</th>
      <th>bbox_east</th>
      <th>bbox_west</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>POLYGON ((24.92074 60.16690, 24.92075 60.16687...</td>
      <td>Kamppi, Southern major district, Helsinki, Hel...</td>
      <td>60.172109</td>
      <td>60.160474</td>
      <td>24.943453</td>
      <td>24.920742</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<ul class="simple">
<li>Plot the area:</li>
</ul>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">area</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>&lt;matplotlib.axes._subplots.AxesSubplot at 0x15aa208cc50&gt;
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/notebooks_L6_retrieve_osm_data_16_1.png" src="../../_images/notebooks_L6_retrieve_osm_data_16_1.png" />
</div>
</div>
</div>
<div class="section" id="Building-footprints">
<h3>Building footprints<a class="headerlink" href="#Building-footprints" title="Permalink to this headline">¶</a></h3>
<p>It is also possible to retrieve other types of OSM data features with OSMnx such as buildings or points of interest (POIs). Let’s download the buildings with <code class="docutils literal notranslate"><span class="pre">OSMnx</span></code> <a class="reference external" href="https://osmnx.readthedocs.io/en/stable/osmnx.html#module-osmnx.footprints">footprints_from_place()</a> -function (same as <code class="docutils literal notranslate"><span class="pre">buildings_from_place</span></code> method in OSMnx&lt;0.9) and plot them on top of our street network in Kamppi.</p>
<ul class="simple">
<li>Retrieve buildings from the area:</li>
</ul>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">buildings</span> <span class="o">=</span> <span class="n">ox</span><span class="o">.</span><span class="n">footprints_from_place</span><span class="p">(</span><span class="n">place_name</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p><em>Note, you can also get other types of footprints using the parameter ``footprint_type`` (default is “buildings”).</em></p>
<ul class="simple">
<li>Check how many building footprints we received:</li>
</ul>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="nb">len</span><span class="p">(</span><span class="n">buildings</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>427
</pre></div>
</div>
</div>
<p>Buildings GeoDataFrame contains several polygons.</p>
<ul class="simple">
<li>Check the first rows:</li>
</ul>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">buildings</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>nodes</th>
      <th>geometry</th>
      <th>addr:city</th>
      <th>addr:country</th>
      <th>addr:housenumber</th>
      <th>addr:street</th>
      <th>building</th>
      <th>name</th>
      <th>name:fi</th>
      <th>name:ko</th>
      <th>...</th>
      <th>outdoor_seating</th>
      <th>addr:floor</th>
      <th>access</th>
      <th>covered</th>
      <th>type</th>
      <th>brand</th>
      <th>building:part</th>
      <th>ele</th>
      <th>electrified</th>
      <th>addr:unit</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>8035238</th>
      <td>[60069605, 60069615, 60275530, 1036979252, 105...</td>
      <td>POLYGON ((24.93563 60.17045, 24.93557 60.17054...</td>
      <td>Helsinki</td>
      <td>FI</td>
      <td>22-24</td>
      <td>Mannerheimintie</td>
      <td>public</td>
      <td>Lasipalatsi</td>
      <td>Lasipalatsi</td>
      <td>라시팔라치</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>8042297</th>
      <td>[1378950415, 1378950417, 1378950418, 319515866...</td>
      <td>POLYGON ((24.92938 60.16795, 24.92933 60.16797...</td>
      <td>Helsinki</td>
      <td>FI</td>
      <td>2</td>
      <td>Runeberginkatu</td>
      <td>yes</td>
      <td>Radisson Blu Royal</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>14797170</th>
      <td>[146125363, 3203698292, 3203698293, 3203698294...</td>
      <td>POLYGON ((24.92427 60.16648, 24.92427 60.16650...</td>
      <td>Helsinki</td>
      <td>FI</td>
      <td>10</td>
      <td>Lapinlahdenkatu</td>
      <td>school</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
<p>3 rows × 93 columns</p>
</div></div>
</div>
<p>As you can see, there are several columns in the buildings-layer. Each column contains information about a spesific tag that OpenStreetMap contributors have added. Each tag consists of a key (the column name), and several potential values (for example <code class="docutils literal notranslate"><span class="pre">building=yes</span></code> or <code class="docutils literal notranslate"><span class="pre">building=school</span></code>). Read more about tags and tagging practices in the <a class="reference external" href="https://wiki.openstreetmap.org/wiki/Tags">OpenStreetMap wiki</a>.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">buildings</span><span class="o">.</span><span class="n">columns</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>Index([&#39;nodes&#39;, &#39;geometry&#39;, &#39;addr:city&#39;, &#39;addr:country&#39;, &#39;addr:housenumber&#39;,
       &#39;addr:street&#39;, &#39;building&#39;, &#39;name&#39;, &#39;name:fi&#39;, &#39;name:ko&#39;, &#39;name:sv&#39;,
       &#39;start_date&#39;, &#39;url&#39;, &#39;wikidata&#39;, &#39;wikipedia&#39;, &#39;addr:postcode&#39;, &#39;bar&#39;,
       &#39;email&#39;, &#39;fax&#39;, &#39;internet_access&#39;, &#39;internet_access:fee&#39;, &#39;phone&#39;,
       &#39;smoking&#39;, &#39;tourism&#39;, &#39;website&#39;, &#39;operator&#39;, &#39;source&#39;, &#39;architect&#39;,
       &#39;building:levels&#39;, &#39;landuse&#39;, &#39;suojelumerkintä&#39;, &#39;layer&#39;, &#39;ref&#39;,
       &#39;fixme&#39;, &#39;last_full_renovation&#39;, &#39;roof:levels&#39;,
       &#39;building:maintenance:operator&#39;, &#39;name:local&#39;, &#39;levels&#39;, &#39;old_name&#39;,
       &#39;created_by&#39;, &#39;omistusasuntoja&#39;, &#39;building:material&#39;, &#39;roof:shape&#39;,
       &#39;building:colour&#39;, &#39;roof:colour&#39;, &#39;name:en&#39;, &#39;name:fr&#39;, &#39;alt_name&#39;,
       &#39;note&#39;, &#39;short_name&#39;, &#39;was:building&#39;, &#39;was:guard:operator&#39;,
       &#39;wheelchair&#39;, &#39;building:min_level&#39;, &#39;amenity&#39;, &#39;cuisine&#39;, &#39;historic&#39;,
       &#39;inscription&#39;, &#39;tomb&#39;, &#39;addr:housename&#39;, &#39;opening_hours&#39;, &#39;shop&#39;,
       &#39;toilets:wheelchair&#39;, &#39;name:da&#39;, &#39;name:nn&#39;, &#39;wheelchair:description&#39;,
       &#39;denomination&#39;, &#39;religion&#39;, &#39;height&#39;, &#39;name:ru&#39;, &#39;official_name&#39;,
       &#39;last_pipe_renovation&#39;, &#39;contact:website&#39;, &#39;guard:operator&#39;, &#39;loc_name&#39;,
       &#39;name:no&#39;, &#39;alt_name:en&#39;, &#39;name:zh&#39;, &#39;drive_through&#39;, &#39;ice_cream&#39;,
       &#39;lippakioski&#39;, &#39;takeaway&#39;, &#39;outdoor_seating&#39;, &#39;addr:floor&#39;, &#39;access&#39;,
       &#39;covered&#39;, &#39;type&#39;, &#39;brand&#39;, &#39;building:part&#39;, &#39;ele&#39;, &#39;electrified&#39;,
       &#39;addr:unit&#39;],
      dtype=&#39;object&#39;)
</pre></div>
</div>
</div>
</div>
<div class="section" id="Points-of-interest">
<h3>Points-of-interest<a class="headerlink" href="#Points-of-interest" title="Permalink to this headline">¶</a></h3>
<p>OSMnx has a nice function called <a class="reference external" href="https://osmnx.readthedocs.io/en/stable/osmnx.html#osmnx.pois.pois_from_place">ox.pois_from_place()</a> that can be used retrieve specific points-of-interest (POIs) from OpenStreetMap based on their amenity-tag. We can, for excample, retrieve all points with a tag <code class="docutils literal notranslate"><span class="pre">amenity=restaurant</span></code>, by passing an argument to the <code class="docutils literal notranslate"><span class="pre">amenities</span></code> paremeter. We could also retrieve several POI categories by passing a list of <a class="reference external" href="https://wiki.openstreetmap.org/wiki/Key:amenity">OSM amenity tag
values</a> to the function.</p>
<ul class="simple">
<li>Let’s retrieve restaurants that are located in our area of interest:</li>
</ul>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Retrieve restaurants</span>
<span class="n">restaurants</span> <span class="o">=</span> <span class="n">ox</span><span class="o">.</span><span class="n">pois_from_place</span><span class="p">(</span><span class="n">place_name</span><span class="p">,</span> <span class="n">amenities</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;restaurant&#39;</span><span class="p">])</span>

<span class="c1"># How many restaurants do we have?</span>
<span class="nb">len</span><span class="p">(</span><span class="n">restaurants</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>212
</pre></div>
</div>
</div>
<p>As we can see, there are quite many restaurants in the area.</p>
<ul class="simple">
<li>Let’s explore what kind of attributes we have in our restaurants GeoDataFrame:</li>
</ul>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Available columns</span>
<span class="n">restaurants</span><span class="o">.</span><span class="n">columns</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>Index([&#39;osmid&#39;, &#39;geometry&#39;, &#39;addr:city&#39;, &#39;addr:country&#39;, &#39;addr:housenumber&#39;,
       &#39;addr:postcode&#39;, &#39;addr:street&#39;, &#39;amenity&#39;, &#39;cuisine&#39;, &#39;name&#39;, &#39;phone&#39;,
       &#39;website&#39;, &#39;wheelchair&#39;, &#39;element_type&#39;, &#39;toilets:wheelchair&#39;,
       &#39;created_by&#39;, &#39;outdoor_seating&#39;, &#39;fixme&#39;, &#39;opening_hours&#39;, &#39;email&#39;,
       &#39;internet_access&#39;, &#39;internet_access:fee&#39;, &#39;opening_hours:brunch&#39;,
       &#39;diet:vegetarian&#39;, &#39;name:fi&#39;, &#39;name:zh&#39;, &#39;short_name&#39;, &#39;takeaway&#39;,
       &#39;contact:website&#39;, &#39;diet:vegan&#39;, &#39;name:ru&#39;, &#39;operator&#39;, &#39;smoking&#39;,
       &#39;wheelchair:description&#39;, &#39;level&#39;, &#39;contact:phone&#39;, &#39;source&#39;, &#39;name:en&#39;,
       &#39;building&#39;, &#39;addr:housename&#39;, &#39;note&#39;, &#39;address&#39;, &#39;brunch&#39;,
       &#39;contact:foursquare&#39;, &#39;contact:yelp&#39;, &#39;ref:vatin&#39;, &#39;delivery&#39;, &#39;url&#39;,
       &#39;lunch:menu&#39;, &#39;reservation&#39;, &#39;room&#39;, &#39;toilets&#39;, &#39;capacity&#39;,
       &#39;access:dog&#39;, &#39;shop&#39;, &#39;opening_hours:lunch_buffet&#39;, &#39;is_in&#39;, &#39;wikidata&#39;,
       &#39;alt_name&#39;, &#39;contact:email&#39;, &#39;established&#39;, &#39;description&#39;, &#39;name:sv&#39;,
       &#39;lunch&#39;, &#39;description:en&#39;, &#39;old_name&#39;, &#39;highchair&#39;, &#39;was:name&#39;,
       &#39;website:en&#39;, &#39;lunch:buffet&#39;, &#39;office&#39;, &#39;addr:place&#39;, &#39;entrance&#39;,
       &#39;addr:floor&#39;, &#39;layer&#39;, &#39;image&#39;, &#39;payment:mastercard&#39;, &#39;payment:visa&#39;,
       &#39;nodes&#39;],
      dtype=&#39;object&#39;)
</pre></div>
</div>
</div>
<p>Wow, there is quite a lot of information related to the POIs. One of the useful ones might be for example the <code class="docutils literal notranslate"><span class="pre">name</span></code>, <code class="docutils literal notranslate"><span class="pre">address</span> <span class="pre">information</span></code> and <code class="docutils literal notranslate"><span class="pre">opening_hours</span></code> information:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Select some useful cols and print</span>
<span class="n">cols</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;opening_hours&#39;</span><span class="p">,</span> <span class="s1">&#39;addr:city&#39;</span><span class="p">,</span> <span class="s1">&#39;addr:country&#39;</span><span class="p">,</span>
        <span class="s1">&#39;addr:housenumber&#39;</span><span class="p">,</span> <span class="s1">&#39;addr:postcode&#39;</span><span class="p">,</span> <span class="s1">&#39;addr:street&#39;</span><span class="p">]</span>
<span class="c1"># Print only selected cols</span>
<span class="n">restaurants</span><span class="p">[</span><span class="n">cols</span><span class="p">]</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>name</th>
      <th>opening_hours</th>
      <th>addr:city</th>
      <th>addr:country</th>
      <th>addr:housenumber</th>
      <th>addr:postcode</th>
      <th>addr:street</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>60062502</th>
      <td>Kabuki</td>
      <td>NaN</td>
      <td>Helsinki</td>
      <td>FI</td>
      <td>12</td>
      <td>00180</td>
      <td>Lapinlahdenkatu</td>
    </tr>
    <tr>
      <th>60133792</th>
      <td>Ateljé Finne</td>
      <td>NaN</td>
      <td>Helsinki</td>
      <td>FI</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>62965963</th>
      <td>Empire Plaza</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>62967659</th>
      <td>Ravintola Pääposti</td>
      <td>NaN</td>
      <td>Helsinki</td>
      <td>NaN</td>
      <td>1 B</td>
      <td>00100</td>
      <td>Mannerheiminaukio</td>
    </tr>
    <tr>
      <th>68734026</th>
      <td>Hampton Bay</td>
      <td>NaN</td>
      <td>Helsinki</td>
      <td>FI</td>
      <td>6</td>
      <td>00120</td>
      <td>Hietalahdenranta</td>
    </tr>
    <tr>
      <th>76617692</th>
      <td>Johan Ludvig</td>
      <td>NaN</td>
      <td>Helsinki</td>
      <td>FI</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>76624339</th>
      <td>Ravintola Rivoletto</td>
      <td>Mo-Th 11:00-23:00; Fr 11:00-24:00; Sa 15:00-24...</td>
      <td>Helsinki</td>
      <td>FI</td>
      <td>38</td>
      <td>00120</td>
      <td>Albertinkatu</td>
    </tr>
    <tr>
      <th>76624351</th>
      <td>Pueblo</td>
      <td>NaN</td>
      <td>Helsinki</td>
      <td>FI</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Eerikinkatu</td>
    </tr>
    <tr>
      <th>76627823</th>
      <td>Atabar</td>
      <td>NaN</td>
      <td>Helsinki</td>
      <td>FI</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Eerikinkatu</td>
    </tr>
    <tr>
      <th>77642757</th>
      <td>Southpark</td>
      <td>Mo-Sa 11:00-15:00; Su 10:30-17:00</td>
      <td>Helsinki</td>
      <td>NaN</td>
      <td>40</td>
      <td>00120</td>
      <td>Sinebrychoffin puisto, Bulevardi</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<p>As we can see, there exists a lot of useful information about restaurants that can be retrieved easily with OSMnx. Also, if some of the information need updating, you can go over to www.openstreetmap.org and edit the source data! :)</p>
</div>
<div class="section" id="Graph-to-GeoDataFrame">
<h3>Graph to GeoDataFrame<a class="headerlink" href="#Graph-to-GeoDataFrame" title="Permalink to this headline">¶</a></h3>
<p>We can now plot all these different OSM layers by using the familiar <code class="docutils literal notranslate"><span class="pre">plot()</span></code> function of Geopandas. As you might remember, the street network data is not a GeoDataFrame (it is <code class="docutils literal notranslate"><span class="pre">networkx.MultiDiGraph</span></code>). Luckily, OSMnx provides a convenient function <code class="docutils literal notranslate"><span class="pre">graph_to_gdfs()</span></code> that can convert the graph into two separate GeoDataFrames where the first one contains the information about the nodes and the second one about the edge.</p>
<ul class="simple">
<li>Let’s extract the nodes and edges from the graph as GeoDataFrames:</li>
</ul>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Retrieve nodes and edges</span>
<span class="n">nodes</span><span class="p">,</span> <span class="n">edges</span> <span class="o">=</span> <span class="n">ox</span><span class="o">.</span><span class="n">graph_to_gdfs</span><span class="p">(</span><span class="n">graph</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">nodes</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>y</th>
      <th>x</th>
      <th>osmid</th>
      <th>highway</th>
      <th>ref</th>
      <th>geometry</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>3216400385</th>
      <td>60.167552</td>
      <td>24.934005</td>
      <td>3216400385</td>
      <td>turning_circle</td>
      <td>NaN</td>
      <td>POINT (24.93400 60.16755)</td>
    </tr>
    <tr>
      <th>1372233731</th>
      <td>60.162290</td>
      <td>24.929274</td>
      <td>1372233731</td>
      <td>crossing</td>
      <td>NaN</td>
      <td>POINT (24.92927 60.16229)</td>
    </tr>
    <tr>
      <th>319885318</th>
      <td>60.165072</td>
      <td>24.925487</td>
      <td>319885318</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>POINT (24.92549 60.16507)</td>
    </tr>
    <tr>
      <th>1005744134</th>
      <td>60.161622</td>
      <td>24.924423</td>
      <td>1005744134</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>POINT (24.92442 60.16162)</td>
    </tr>
    <tr>
      <th>3216400394</th>
      <td>60.167662</td>
      <td>24.933920</td>
      <td>3216400394</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>POINT (24.93392 60.16766)</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[17]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">edges</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[17]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>u</th>
      <th>v</th>
      <th>key</th>
      <th>osmid</th>
      <th>name</th>
      <th>highway</th>
      <th>maxspeed</th>
      <th>oneway</th>
      <th>length</th>
      <th>geometry</th>
      <th>lanes</th>
      <th>service</th>
      <th>tunnel</th>
      <th>junction</th>
      <th>access</th>
      <th>bridge</th>
      <th>ref</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>3216400385</td>
      <td>301360890</td>
      <td>0</td>
      <td>15240373</td>
      <td>Kansakoulukuja</td>
      <td>residential</td>
      <td>30</td>
      <td>False</td>
      <td>13.177</td>
      <td>LINESTRING (24.93400 60.16755, 24.93393 60.167...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1372233731</td>
      <td>298367080</td>
      <td>0</td>
      <td>86533507</td>
      <td>NaN</td>
      <td>footway</td>
      <td>NaN</td>
      <td>False</td>
      <td>6.925</td>
      <td>LINESTRING (24.92927 60.16229, 24.92917 60.16225)</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2</th>
      <td>1372233731</td>
      <td>292859610</td>
      <td>0</td>
      <td>15103120</td>
      <td>NaN</td>
      <td>primary_link</td>
      <td>30</td>
      <td>True</td>
      <td>33.874</td>
      <td>LINESTRING (24.92927 60.16229, 24.92930 60.162...</td>
      <td>2</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>3</th>
      <td>1372233731</td>
      <td>4430643601</td>
      <td>0</td>
      <td>[154412960, 86533507]</td>
      <td>NaN</td>
      <td>footway</td>
      <td>NaN</td>
      <td>False</td>
      <td>12.489</td>
      <td>LINESTRING (24.92927 60.16229, 24.92941 60.162...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>4</th>
      <td>1372233731</td>
      <td>311043714</td>
      <td>0</td>
      <td>86533509</td>
      <td>Hietalahdenkatu</td>
      <td>primary</td>
      <td>30</td>
      <td>True</td>
      <td>38.768</td>
      <td>LINESTRING (24.92927 60.16229, 24.92938 60.162...</td>
      <td>2</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<p>Nice! Now, as we can see, we have our graph as GeoDataFrames and we can plot them using the same functions and tools as we have used before.</p>
<div class="admonition note">
<p class="admonition-title fa fa-exclamation-circle"><strong>Note</strong></p>
<p>There are also other ways of retrieving the data from OpenStreetMap with OSMnx such as passing a Polygon to extract the data from that area, or passing Point coordinates and retrieving data around that location with specific radius. Take a look of this <a class="reference external" href="https://github.com/gboeing/osmnx-examples/blob/master/notebooks/01-overview-osmnx.ipynb">tutorial to find out how to use those features of OSMnx</a>.</p>
</div>
</div>
<div class="section" id="Plotting-the-data">
<h3>Plotting the data<a class="headerlink" href="#Plotting-the-data" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Let’s create a map out of the streets, buildings, restaurants, and the area Polygon but let’s exclude the nodes (to keep the figure clearer).</li>
</ul>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span><span class="mi">8</span><span class="p">))</span>

<span class="c1"># Plot the footprint</span>
<span class="n">area</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">facecolor</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">)</span>

<span class="c1"># Plot street edges</span>
<span class="n">edges</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">edgecolor</span><span class="o">=</span><span class="s1">&#39;#BC8F8F&#39;</span><span class="p">)</span>

<span class="c1"># Plot buildings</span>
<span class="n">buildings</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">facecolor</span><span class="o">=</span><span class="s1">&#39;khaki&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.7</span><span class="p">)</span>

<span class="c1"># Plot restaurants</span>
<span class="n">restaurants</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;green&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.7</span><span class="p">,</span> <span class="n">markersize</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/notebooks_L6_retrieve_osm_data_39_0.png" src="../../_images/notebooks_L6_retrieve_osm_data_39_0.png" />
</div>
</div>
<p>Cool! Now we have a map where we have plotted the restaurants, buildings, streets and the boundaries of the selected region of ‘Kamppi’ in Helsinki. And all of this required only a few lines of code. Pretty neat!</p>
<p>As a final step, we might want to re-project the layers to a local projection for plotting. Here, we will use the tools we already know, namely <code class="docutils literal notranslate"><span class="pre">pyproj</span> <span class="pre">CRS</span></code>. In the latter part of this lesson we will learn how to use OSMnx to re-project our data to UTM coordinates.</p>
<ul class="simple">
<li>Re-project the layers to epsg:3067</li>
</ul>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[19]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">pyproj</span> <span class="kn">import</span> <span class="n">CRS</span>

<span class="c1"># Set projection</span>
<span class="n">projection</span> <span class="o">=</span> <span class="n">CRS</span><span class="o">.</span><span class="n">from_epsg</span><span class="p">(</span><span class="mi">3067</span><span class="p">)</span>

<span class="c1"># Re-project layers</span>
<span class="n">area</span> <span class="o">=</span> <span class="n">area</span><span class="o">.</span><span class="n">to_crs</span><span class="p">(</span><span class="n">projection</span><span class="p">)</span>
<span class="n">edges</span> <span class="o">=</span> <span class="n">edges</span><span class="o">.</span><span class="n">to_crs</span><span class="p">(</span><span class="n">projection</span><span class="p">)</span>
<span class="n">buildings</span> <span class="o">=</span> <span class="n">buildings</span><span class="o">.</span><span class="n">to_crs</span><span class="p">(</span><span class="n">projection</span><span class="p">)</span>
<span class="n">restaurants</span> <span class="o">=</span> <span class="n">restaurants</span><span class="o">.</span><span class="n">to_crs</span><span class="p">(</span><span class="n">projection</span><span class="p">)</span>
</pre></div>
</div>
</div>
<ul class="simple">
<li>Create a new plot with the re-projected layers:</li>
</ul>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[20]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span><span class="mi">8</span><span class="p">))</span>

<span class="c1"># Plot the footprint</span>
<span class="n">area</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">facecolor</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">)</span>

<span class="c1"># Plot street edges</span>
<span class="n">edges</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">edgecolor</span><span class="o">=</span><span class="s1">&#39;dimgray&#39;</span><span class="p">)</span>

<span class="c1"># Plot buildings</span>
<span class="n">buildings</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">facecolor</span><span class="o">=</span><span class="s1">&#39;silver&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.7</span><span class="p">)</span>

<span class="c1"># Plot restaurants</span>
<span class="n">restaurants</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;yellow&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.7</span><span class="p">,</span> <span class="n">markersize</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/notebooks_L6_retrieve_osm_data_44_0.png" src="../../_images/notebooks_L6_retrieve_osm_data_44_0.png" />
</div>
</div>
<div class="admonition note">
<p class="admonition-title fa fa-exclamation-circle"><strong>Task</strong></p>
<p>Retrieve OpenStreetMap data from some other area! Download these elements using OSMnx functions from your area of interest:</p>
<ul class="simple">
<li>Extent of the area using <code class="docutils literal notranslate"><span class="pre">gdf_from_place()</span></code></li>
<li>Street network using <code class="docutils literal notranslate"><span class="pre">graph_from_place()</span></code>, and convert to gdf using <code class="docutils literal notranslate"><span class="pre">ox.graph_to_gdfs()</span></code></li>
<li>Building footprints using <code class="docutils literal notranslate"><span class="pre">ox.footprints_from_place()</span></code></li>
</ul>
<p><em>Note, the larger the area you choose, the longer it takes to retrieve data from the API! Use parameter ``network_type=drive`` to limit the graph query to filter out un-driveable roads.</em></p>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="Extra:-Park-polygons">
<h3>Extra: Park polygons<a class="headerlink" href="#Extra:-Park-polygons" title="Permalink to this headline">¶</a></h3>
<p>Notice that we can also retrieve other types of footprints from OpenStreetMap by specifying the <code class="docutils literal notranslate"><span class="pre">footprint_type</span></code> when using functions from the OSMnx <a class="reference external" href="https://osmnx.readthedocs.io/en/stable/osmnx.html#module-osmnx.footprints">footprints module</a>. <code class="docutils literal notranslate"><span class="pre">buildings</span></code> is the default value for this parameter, but we can also pass other OpenStreetMap tag keys.</p>
<p>Let’s try to fetch all public parks in the Kamppi area. In OpenStreetMap, parks are often tagged as <code class="docutils literal notranslate"><span class="pre">leisure=park</span></code> (also other tags might be used, such as <code class="docutils literal notranslate"><span class="pre">landuse=recreation_ground</span></code>,<code class="docutils literal notranslate"><span class="pre">landuse=grass</span></code>, see OpenStreetMap, and OSM wiki for more details).</p>
<ul class="simple">
<li>We need to start by fetching all footprints from the tag <code class="docutils literal notranslate"><span class="pre">leisure</span></code>:</li>
</ul>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[21]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">leisure</span> <span class="o">=</span> <span class="n">ox</span><span class="o">.</span><span class="n">footprints_from_place</span><span class="p">(</span><span class="n">place_name</span><span class="p">,</span> <span class="n">footprint_type</span><span class="o">=</span><span class="s2">&quot;leisure&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<ul class="simple">
<li>let’s check the data:</li>
</ul>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[22]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">leisure</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[22]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>nodes</th>
      <th>geometry</th>
      <th>leisure</th>
      <th>name</th>
      <th>name:fi</th>
      <th>name:sv</th>
      <th>hoitoluokitus_viheralue</th>
      <th>source</th>
      <th>wikidata</th>
      <th>wikipedia</th>
      <th>access</th>
      <th>alt_name</th>
      <th>loc_name</th>
      <th>barrier</th>
      <th>sport</th>
      <th>colour</th>
      <th>fixme</th>
      <th>mooring</th>
      <th>short_name</th>
      <th>short_name:sv</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>8042256</th>
      <td>[292719496, 1001543836, 1037987967, 1001544060...</td>
      <td>POLYGON ((24.93566 60.17132, 24.93566 60.17130...</td>
      <td>park</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>8042613</th>
      <td>[552965718, 293390264, 295056669, 256264975, 1...</td>
      <td>POLYGON ((24.93701 60.16947, 24.93627 60.16919...</td>
      <td>park</td>
      <td>Simonpuistikko</td>
      <td>Simonpuistikko</td>
      <td>Simonsskvären</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>15218362</th>
      <td>[144181223, 150532964, 150532958, 150532966, 1...</td>
      <td>POLYGON ((24.92330 60.16499, 24.92323 60.16500...</td>
      <td>park</td>
      <td>Työmiehenpuistikko</td>
      <td>Työmiehenpuistikko</td>
      <td>Arbetarparken</td>
      <td>A2</td>
      <td>survey</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<ul class="simple">
<li>Check all values for the column <code class="docutils literal notranslate"><span class="pre">leisure</span></code>:</li>
</ul>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[23]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">leisure</span><span class="p">[</span><span class="s2">&quot;leisure&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[23]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>park          15
pitch          8
playground     6
dog_park       2
flowerbed      1
marina         1
Name: leisure, dtype: int64
</pre></div>
</div>
</div>
<ul class="simple">
<li>select all park polygons (here, selecting both “park” and “playground”):</li>
</ul>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[24]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">parks</span> <span class="o">=</span> <span class="n">leisure</span><span class="p">[</span><span class="n">leisure</span><span class="p">[</span><span class="s2">&quot;leisure&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">isin</span><span class="p">([</span><span class="s2">&quot;park&quot;</span><span class="p">,</span><span class="s2">&quot;playground&quot;</span><span class="p">])]</span>
</pre></div>
</div>
</div>
<ul class="simple">
<li>plot the parks:</li>
</ul>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[25]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">parks</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s2">&quot;green&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[25]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>&lt;matplotlib.axes._subplots.AxesSubplot at 0x15aa2ef95c0&gt;
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/notebooks_L6_retrieve_osm_data_56_1.png" src="../../_images/notebooks_L6_retrieve_osm_data_56_1.png" />
</div>
</div>
<ul class="simple">
<li>Finally, we can re-project the park polygons and add them to our map:</li>
</ul>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[26]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">parks</span> <span class="o">=</span> <span class="n">parks</span><span class="o">.</span><span class="n">to_crs</span><span class="p">(</span><span class="n">projection</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[27]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span><span class="mi">8</span><span class="p">))</span>

<span class="c1"># Plot the footprint</span>
<span class="n">area</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">facecolor</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">)</span>

<span class="c1"># Plot the parks</span>
<span class="n">parks</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">facecolor</span><span class="o">=</span><span class="s2">&quot;green&quot;</span><span class="p">)</span>

<span class="c1"># Plot street edges</span>
<span class="n">edges</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">edgecolor</span><span class="o">=</span><span class="s1">&#39;dimgray&#39;</span><span class="p">)</span>

<span class="c1"># Plot buildings</span>
<span class="n">buildings</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">facecolor</span><span class="o">=</span><span class="s1">&#39;silver&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.7</span><span class="p">)</span>

<span class="c1"># Plot restaurants</span>
<span class="n">restaurants</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;yellow&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.7</span><span class="p">,</span> <span class="n">markersize</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/notebooks_L6_retrieve_osm_data_59_0.png" src="../../_images/notebooks_L6_retrieve_osm_data_59_0.png" />
</div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="network-analysis.html" class="btn btn-neutral float-right" title="Network analysis in Python" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../../lessons/L6/overview.html" class="btn btn-neutral float-left" title="Overview" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Henrikki Tenkanen and Vuokko Heikinheimo, Digital Geography Lab, University of Helsinki
      <span class="lastupdated">
        Last updated on Dec 02, 2019.
      </span>

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
    <p> <br/> <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png" /></a><br /> </a></p>
     


</footer>

        </div>
      </div>

    </section>

  </div>
  
<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
        <span class="fa fa-book"> Other Versions</span>
        v: develop
        <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
        <dl>
            <dt>Tags</dt>
            <dd><a href="../../../2018/notebooks/L6/retrieve_osm_data.html">2018</a></dd>
        </dl>
        <dl>
            <dt>Branches</dt>
            <dd><a href="retrieve_osm_data.html">develop</a></dd>
            <dd><a href="../../../drafts/index.html">drafts</a></dd>
            <dd><a href="../../../master/notebooks/L6/retrieve_osm_data.html">master</a></dd>
        </dl>
    </div>
</div>


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>